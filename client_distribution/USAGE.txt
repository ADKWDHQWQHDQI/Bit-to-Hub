================================================================================
  BITBUCKET TO GITHUB PR MIGRATION TOOL - USER GUIDE
================================================================================

WHAT THIS TOOL DOES:
--------------------
This tool automatically migrates Pull Requests (PRs) from Bitbucket to GitHub,
including:
  âœ“ PR descriptions and metadata
  âœ“ Comments and discussions (including nested replies)
  âœ“ Reviewers and approval status
  âœ“ Tasks and their completion status
  âœ“ Images and attachments
  âœ“ Commit history verification
  âœ“ User mapping (Bitbucket users â†’ GitHub users)

FEATURES:
  âœ“ Audit Mode - Analyze PRs before migrating
  âœ“ Credential Validation - Automatic before each run
  âœ“ PR Summary - See statistics at migration start
  âœ“ Progress Tracking - Real-time progress bars
  âœ“ Dry-Run Mode - Practice without making changes
  âœ“ Detailed Logging - Complete audit trail


PREREQUISITES:
--------------
Before running this tool, ensure:

1. âœ“ Your repository code is already migrated to GitHub
2. âœ“ All branches exist in GitHub
3. âœ“ You have admin access to both Bitbucket and GitHub repositories
4. âœ“ You have the following credentials ready:
   
   BITBUCKET:
     - Workspace name
     - Repository name
     - OAuth Key + Secret OR Bearer Token
   
   GITHUB:
     - Owner/Organization name
     - Repository name
     - Personal Access Token (with 'repo' scope)


HOW TO GET CREDENTIALS:
------------------------

BITBUCKET TOKEN:
  1. Go to: https://bitbucket.org/account/settings/api-tokens/
  2. Click "Create token"
  3. Give it a name (e.g., "PR Migration")
  4. Select permissions: Repositories (Read)
  5. Click "Create" and copy the token

BITBUCKET OAUTH (Alternative):
  1. Go to: https://bitbucket.org/{workspace}/workspace/settings/api
  2. Click "Add consumer"
  3. Give it a name and permissions: Repositories (Read)
  4. Copy the Key and Secret

GITHUB TOKEN:
  1. Go to: https://github.com/settings/tokens
  2. Click "Generate new token" â†’ "Generate new token (classic)"
  3. Give it a name (e.g., "PR Migration")
  4. Select scope: âœ“ repo (Full control of repositories)
  5. Click "Generate token" and copy it immediately (shown only once!)


FIRST RUN - SETUP:
------------------
When you run the tool for the first time, it will guide you through setup:

1. Double-click PRMigrationTool.exe
2. You'll see a configuration wizard
3. Enter your credentials when prompted:
   - Bitbucket workspace and repository (visible)
   - Authentication method (OAuth or Token)
   - Credentials (hidden as **** for security):
     â€¢ OAuth Key (hidden)
     â€¢ OAuth Secret (hidden)
     â€¢ OR Bitbucket Token (hidden)
   - GitHub owner and repository (visible)
   - GitHub Personal Access Token (hidden as ****)

4. The tool creates a config.yaml file automatically
5. Setup is complete!

NOTE: Sensitive credentials (tokens, keys, secrets) are hidden as you type
      for security. This is normal - just type carefully!


RUNNING THE MIGRATION:
----------------------

STEP 1 - TEST CONNECTION (Recommended First):
  PRMigrationTool.exe --test-connection
  
  âœ“ Validates your Bitbucket and GitHub credentials
  âœ“ Checks repository access
  âœ“ Takes only a few seconds

STEP 2 - ANALYZE YOUR PRs (Highly Recommended):
  PRMigrationTool.exe --audit
  
  âœ“ Shows comprehensive PR statistics before migration
  âœ“ Displays: PR counts, comments, reviewers, participants, tasks
  âœ“ Estimates migration complexity
  âœ“ Provides recommendations
  âœ“ No changes made - analysis only
  
  Example output:
    ðŸ“Š Pull Requests: 13 total
       â”œâ”€ Open: 8
       â””â”€ Closed: 5 (Merged: 3, Declined: 2)
    
    ðŸ’¬ Activity:
       â”œâ”€ Comments: 45
       â”œâ”€ Participants: 8 users
       â””â”€ Reviewers: 5 users

STEP 3 - DRY-RUN MODE (Practice migration):
  PRMigrationTool.exe --dry-run
  
  âœ“ Simulates the complete migration process
  âœ“ Shows what would happen without making changes
  âœ“ Displays PR summary before starting

STEP 4 - FULL MIGRATION:
  PRMigrationTool.exe
  
  âœ“ Performs the actual migration
  âœ“ Validates credentials automatically
  âœ“ Shows PR summary before starting
  âœ“ Displays real-time progress
  âœ“ Creates detailed logs

MIGRATE SPECIFIC PRs ONLY:
  PRMigrationTool.exe --pr-numbers 13
  PRMigrationTool.exe --pr-numbers 13,14,15
  
  âœ“ Migrate only specific PR numbers
  âœ“ Useful for testing or partial migrations


USER MAPPING (Optional but Recommended):
-----------------------------------------
To properly map Bitbucket users to GitHub users:

1. After first run, edit: user_mapping.yaml
2. Add mappings in format:
WHAT HAPPENS DURING MIGRATION:
-------------------------------
1. âœ“ Credentials are validated automatically
2. âœ“ PRs are fetched from Bitbucket
3. âœ“ Repository summary is displayed:
     - PR counts (open/closed/merged/declined)
     - Activity stats (comments, participants, reviewers)
     - Task summary (resolved/pending)
4. âœ“ Closed PRs are archived (optional: create GitHub issues)
5. âœ“ Open PRs are migrated with full content
6. âœ“ Progress is shown in real-time
7. âœ“ Summary report is generated

OUTPUT AND LOGS:
----------------
The tool creates a 'logs' folder with:
  - migration_summary.log - Detailed migration log
  - closed_prs.json - Record of closed PRs (merged, declined)
  - failed_prs.json - Any PRs that failed to migrate with reasons

3. Save the file and run migration again

 with setup wizard

ISSUE: "Credential validation failed"
â†’ Run: PRMigrationTool.exe --test-connection to diagnose
â†’ Common causes:
  â€¢ Token expired or invalid - Generate a new one
  â€¢ Wrong workspace/owner name - Double check spelling
  â€¢ Insufficient permissions - Ensure 'repo' scope for GitHub

ISSUE: "Authentication failed (401)"
â†’ Your token is invalid or expired. Generate a new one.

ISSUE: "Repository not found (404)"
â†’ Check workspace/owner and repository names are correct
â†’ Ensure you have access to both repositories

ISSUE: "PR migration failed - branch not found"
â†’ Ensure all branches exist in GitHub before migrating
â†’ Or enable skip_prs_with_missing_branches in config.yaml

ISSUE: "No commit found for SHA"
â†’ Repository may have been rebased/squashed during code migration
â†’ Enable skip_commit_verification in config.yaml

ISSUE: "Rate limit exceeded"
â†’ The tool has automatic retry. Just wait, it will continue.

ISSUE: "PR already exists"
BEST PRACTICES:
---------------
1. âœ“ Always run --test-connection first
2. âœ“ Use --audit to understand your PRs before migrating
3. âœ“ Run --dry-run to practice
4. âœ“ Configure user_mapping.yaml for proper user attribution
5. âœ“ Keep backups of logs folder
6. âœ“ Migrate during low-activity hours
7. âœ“ Test with a few PRs first (--pr-numbers)

ADVANCED OPTIONS (config.yaml):
--------------------------------
You can customize migration behavior by editing config.yaml:

  skip_commit_verification: true
    â†’ Skip checking if commits exist (for rebased repos)
  
  skip_prs_with_missing_branches: true
    â†’ Skip PRs whose source branch doesn't exist in GitHub
  
  create_closed_issues: false
    â†’ Don't create GitHub issues for closed Bitbucket PRs

NEED HELP?
----------
If you encounter issues:
  1. Run: PRMigrationTool.exe --test-connection
  2. Run: PRMigrationTool.exe --audit (understand the scope)
  3. Check the logs/migration_summary.log file
  4. Verify all prerequisites are met
  5. Check the failed_prs.json for specific error messages
  6. Contact support with error detailse a new one.

ISSUE: "Repository not found (404)"
â†’ Check workspace/owner and repository names are correct

ISSUE: "PR migration failed - branch not found"
â†’ Ensure all branches exist in GitHub before migrating

ISSUE: "Rate limit exceeded"
â†’ The tool has automatic retry. Just wait, it will continue.


NEED HELP?
----------
If you encounter issues:
  1. Check the logs/migration_summary.log file
  2. Verify all prerequisites are met
  3. Contact support with the error message from logs


================================================================================
  IMPORTANT: KEEP YOUR CREDENTIALS SECURE
================================================================================
  - Never share your config.yaml file (contains tokens)
  - Tokens have full access to your repositories
  - Delete tokens after migration if no longer needed
================================================================================
